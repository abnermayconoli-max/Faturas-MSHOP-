<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Sistema de Contas a Pagar - Transportadoras</title>
  <link rel="stylesheet" href="{{ url_for('static', path='styles.css') }}">
</head>
<body>
  <div class="layout">
    <!-- SIDEBAR -->
    <aside class="sidebar">
      <h1 class="logo">Contas a Pagar</h1>

      <button class="btn primary" onclick="resetFiltros()">Página inicial</button>

      <div class="sidebar-group">
        <h2>Gabrielly</h2>
        <button class="btn" onclick="filtrarTransportadora('DHL')">DHL - Gabrielly</button>
        <button class="btn" onclick="filtrarTransportadora('Pannan')">Pannan - Gabrielly</button>
      </div>

      <div class="sidebar-group">
        <h2>Juliana</h2>
        <button class="btn" onclick="filtrarTransportadora('Garcia')">Garcia - Juliana</button>
        <button class="btn" onclick="filtrarTransportadora('Excargo')">Excargo - Juliana</button>
      </div>

      <div class="sidebar-group">
        <h2>Larissa</h2>
        <button class="btn" onclick="filtrarTransportadora('Transbritto')">Transbritto - Larissa</button>
        <button class="btn" onclick="filtrarTransportadora('PDA')">PDA - Larissa</button>
        <button class="btn" onclick="filtrarTransportadora('GLM')">GLM - Larissa</button>
      </div>

      <div class="sidebar-group">
        <h2>Filtro por vencimento</h2>
        <input type="date" id="filtro-vencimento" onchange="atualizarListaFaturas()" />
      </div>

      <a class="btn secondary" href="/faturas/exportar" target="_blank">Exportar CSV</a>
    </aside>

    <!-- CONTEÚDO PRINCIPAL -->
    <main class="content">
      <!-- CARDS RESUMO -->
      <section class="dashboard" id="dashboard-resumo">
        <div class="card kpi">
          <span>Total</span>
          <strong id="kpi-total">R$ 0,00</strong>
        </div>
        <div class="card kpi">
          <span>Pendentes</span>
          <strong id="kpi-pendentes">R$ 0,00</strong>
        </div>
        <div class="card kpi">
          <span>Atrasadas</span>
          <strong id="kpi-atrasadas">R$ 0,00</strong>
        </div>
        <div class="card kpi">
          <span>Em dia</span>
          <strong id="kpi-em-dia">R$ 0,00</strong>
        </div>
      </section>

      <!-- FORMULÁRIO NOVA FATURA -->
      <section class="card form-card">
        <h2>Cadastro de Fatura</h2>
        <form id="form-fatura" onsubmit="criarFatura(event)">
          <div class="form-grid">
            <div class="form-group">
              <label for="transportadora">Transportadora</label>
              <select id="transportadora" name="transportadora" required>
                <option value="">Selecione...</option>
                <option value="DHL - Gabrielly">DHL - Gabrielly</option>
                <option value="Pannan - Gabrielly">Pannan - Gabrielly</option>
                <option value="Garcia - Juliana">Garcia - Juliana</option>
                <option value="Excargo - Juliana">Excargo - Juliana</option>
                <option value="Transbritto - Larissa">Transbritto - Larissa</option>
                <option value="PDA - Larissa">PDA - Larissa</option>
                <option value="GLM - Larissa">GLM - Larissa</option>
              </select>
            </div>

            <div class="form-group">
              <label for="numero_fatura">Número da Fatura</label>
              <input type="text" id="numero_fatura" name="numero_fatura" required />
            </div>

            <div class="form-group">
              <label for="valor">Valor</label>
              <input type="number" step="0.01" id="valor" name="valor" required />
            </div>

            <div class="form-group">
              <label for="data_vencimento">Data de vencimento</label>
              <input type="date" id="data_vencimento" name="data_vencimento" required />
            </div>

            <div class="form-group">
              <label for="status">Status</label>
              <select id="status" name="status">
                <option value="pendente">Pendente</option>
                <option value="pago">Pago</option>
              </select>
            </div>

            <div class="form-group observacao-group">
              <label for="observacao">Observação</label>
              <textarea id="observacao" name="observacao" rows="2"
                placeholder="Ex: NF com divergência, aguardar retorno da transportadora..."></textarea>
            </div>

            <div class="form-group">
              <label for="anexos">Anexos (pode selecionar vários)</label>
              <input type="file" id="anexos" name="anexos" multiple />
            </div>
          </div>

          <button type="submit" class="btn primary">Salvar Fatura</button>
        </form>
      </section>

      <!-- LISTA DE FATURAS -->
      <section class="card">
        <div class="section-header">
          <h2>Faturas</h2>
          <span id="filtro-atual" class="badge"></span>
        </div>
        <div id="lista-faturas" class="lista-faturas">
          <!-- preenchido via JS -->
        </div>
      </section>
    </main>
  </div>

  <script src="{{ url_for('static', path='app.js') }}"></script>
</body>
</html>
